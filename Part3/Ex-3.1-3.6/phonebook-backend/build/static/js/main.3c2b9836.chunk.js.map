{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","filter","onFilterChange","value","onChange","Notification","successMessage","errorMessage","className","PersonForm","onFormSubmit","onNameChange","nameValue","onNumberChange","numberValue","onSubmit","type","Person","person","handleDelete","key","name","number","onClick","id","Persons","persons","toLowerCase","includes","map","filteredPerson","baseUrl","axios","get","then","res","data","newObject","post","put","delete","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setSuccessMessage","setErrorMessage","useEffect","personService","allPersons","catch","err","alert","e","target","preventDefault","existingPerson","find","window","confirm","changedPerson","returnedPerson","setTimeout","response","error","p","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3c2b9836.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction Filter({ filter, onFilterChange }) {\n  return (\n    <div>\n      Filter shown with <input value={filter} onChange={onFilterChange} />\n    </div>\n  );\n}\n\nexport default Filter;\n","import React from \"react\";\n\nconst Notification = ({ successMessage, errorMessage }) => {\n  if (!successMessage && !errorMessage) {\n    return null;\n  }\n\n  return (\n    <div className={`message ${successMessage ? \"success\" : \"error\"}`}>\n      {successMessage ? successMessage : errorMessage}\n    </div>\n  );\n};\n\nexport default Notification;\n","import React from \"react\";\n\nfunction PersonForm({\n  onFormSubmit,\n  onNameChange,\n  nameValue,\n  onNumberChange,\n  numberValue,\n}) {\n  return (\n    <form onSubmit={onFormSubmit}>\n      <h2>Add a new</h2>\n      <div>\n        Name: <input onChange={onNameChange} value={nameValue} />\n      </div>\n      <div>\n        Number: <input onChange={onNumberChange} value={numberValue} />\n      </div>\n      <div>\n        <button type=\"submit\">Add</button>\n      </div>\n    </form>\n  );\n}\n\nexport default PersonForm;\n","import React from \"react\";\n\nfunction Person({ person, handleDelete }) {\n  return (\n    <p key={person.name}>\n      {person.name} {person.number}\n      &nbsp;<button onClick={() => handleDelete(person.id)}>Delete</button>\n    </p>\n  );\n}\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nfunction Persons({ persons, filter, handleDelete }) {\n  return (\n    <div>\n      {persons\n        .filter((person) =>\n          person.name.toLowerCase().includes(filter.toLowerCase())\n        )\n        .map((filteredPerson) => (\n          <Person\n            key={filteredPerson.name}\n            person={filteredPerson}\n            handleDelete={handleDelete}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport default Persons;\n","import axios from \"axios\"\nconst baseUrl = \"api/persons\"\n\nconst getAll = () => {\n  const req = axios.get(baseUrl)\n  return req.then((res) => res.data)\n}\n\nconst create = (newObject) => {\n  const req = axios.post(baseUrl, newObject)\n  return req.then((res) => res.data)\n}\n\nconst update = (id, newObject) => {\n  const req = axios.put(`${baseUrl}/${id}`, newObject)\n  return req.then((res) => res.data)\n}\n\nconst remove = (id) => {\n  const req = axios.delete(`${baseUrl}/${id}`)\n  return req.then((res) => res.data)\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  remove,\n}\n","import React, { useEffect, useState } from \"react\"\nimport Filter from \"./components/Filter\"\nimport Notification from \"./components/Notification\"\nimport PersonForm from \"./components/PersonForm\"\nimport Persons from \"./components/Persons\"\nimport personService from \"./services/persons\"\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\")\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [filter, setFilter] = useState(\"\")\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((allPersons) => {\n        setPersons(allPersons)\n      })\n      .catch((err) => alert(err))\n  }, [])\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilterChange = (e) => {\n    setFilter(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n\n    if (!newName || !newNumber) {\n      alert(\"Please fill in the fields\")\n      return\n    }\n\n    // Person exists in the database\n    const existingPerson = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    )\n\n    if (existingPerson && existingPerson.number === newNumber) {\n      alert(`${newName} is already added to phonebook`)\n      setNewName(\"\")\n      setNewNumber(\"\")\n      return\n    }\n\n    // Change number for exiting person in database\n    if (existingPerson && existingPerson.number !== newNumber) {\n      if (\n        window.confirm(\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const changedPerson = { ...existingPerson, number: newNumber }\n        const id = existingPerson.id\n\n        personService\n          .update(id, changedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) => (person.id !== id ? person : returnedPerson))\n            )\n            setSuccessMessage(`Updated ${changedPerson.name}'s number`)\n            setTimeout(() => {\n              setSuccessMessage(null)\n            }, 5000)\n            setNewName(\"\")\n            setNewNumber(\"\")\n          })\n          .catch((err) => {\n            if (err.response.data) {\n              setErrorMessage(err.response.data.error)\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            } else {\n              setErrorMessage(\n                `Information of ${changedPerson.name} has already been removed from server`\n              )\n              setPersons(persons.filter((p) => p.id !== id))\n              setNewName(\"\")\n              setNewNumber(\"\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            }\n          })\n        return\n      } else {\n        return\n      }\n    }\n\n    // Create new person & send to database\n    const newPerson = { name: newName, number: newNumber }\n    personService\n      .create(newPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson))\n        setSuccessMessage(`Added ${returnedPerson.name}`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 3000)\n        setNewName(\"\")\n        setNewNumber(\"\")\n      })\n      .catch((err) => {\n        setErrorMessage(err.response.data.error)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n  }\n\n  const handleDelete = (id) => {\n    if (window.confirm(\"Do you really want to delete this person\")) {\n      personService\n        .remove(id)\n        .then(() => {\n          setSuccessMessage(`Deleted ${persons.find((person) => person.id === id).name}`)\n          setPersons(persons.filter((person) => person.id !== id))\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 3000)\n        })\n        .catch((err) => alert(err))\n    } else {\n      return\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification successMessage={successMessage} errorMessage={errorMessage} />\n      <Filter filter={filter} onFilterChange={handleFilterChange} />\n      <PersonForm\n        onFormSubmit={handleSubmit}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        nameValue={newName}\n        numberValue={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}